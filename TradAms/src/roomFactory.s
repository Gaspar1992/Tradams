.area _DATA

;;===============================================================================
;; DEFINED CONSTANTS
;;===============================================================================



CONNECTOR_ROOMS:
    ROOM_C1:  .db #192,#134,#112,#140,#27,#152,#16,#12,#16,#192,#8,#224,#131,#56,#198,#12,#244,#6
    ROOM_C2:  .db #0,#128,#240,#200,#7,#75,#132,#13,#144,#33,#216,#192,#18,#79,#195,#0,#193,#0
    ROOM_C3:  .db #255,#255,#254,#255,#248,#1,#3,#128,#3,#192,#192,#1,#248,#3,#254,#63,#255,#255
    ROOM_C4:  .db #255,#255,#168,#17,#170,#85,#84,#42,#71,#234,#170,#85,#138,#85,#168,#5,#255,#255
    ROOM_C5:  .db #16,#33,#68,#136,#0,#0,#32,#8,#8,#66,#16,#16,#0,#0,#68,#136,#16,#33
    ROOM_C6:  .db #224,#7,#224,#7,#224,#7,#28,#56,#28,#56,#14,#112,#224,#7,#224,#7,#224,#7
    ROOM_C7:  .db #32,#17,#65,#34,#130,#68,#8,#68,#16,#8,#17,#32,#34,#65,#68,#130,#136,#4
    ROOM_C8:  .db #128,#1,#128,#1,#128,#1,#57,#156,#57,#156,#128,#1,#128,#1,#128,#1,#128,#1
    ROOM_C9:  .db #254,#63,#254,#31,#152,#1,#0,#0,#0,#0,#128,#32,#200,#97,#252,#119,#254,#255
    ROOM_C10: .db #240,#71,#196,#131,#136,#17,#56,#0,#12,#32,#0,#4,#8,#30,#146,#14,#112,#16
    ROOM_C11: .db #224,#0,#0,#88,#8,#120,#28,#60,#28,#0,#30,#0,#12,#3,#192,#7,#192,#15
    ROOM_C12: .db #255,#255,#255,#255,#255,#255,#0,#0,#0,#0,#255,#255,#255,#255,#255,#255,#255,#255
    ROOM_C13: .db #130,#162,#37,#69,#82,#18,#65,#20,#18,#136,#20,#68,#72,#170,#162,#68,#69,#17
    ROOM_C14: .db #0,#0,#4,#0,#12,#28,#48,#58,#99,#98,#39,#132,#60,#12,#24,#24,#0,#0
    ROOM_C15: .db #0,#0,#48,#6,#16,#12,#48,#60,#31,#224,#24,#112,#112,#24,#64,#14,#0,#0
    ROOM_C16: .db #0,#128,#112,#192,#26,#92,#23,#226,#48,#2,#31,#246,#48,#19,#96,#16,#64,#16
    ROOM_C17: .db #192,#65,#56,#18,#56,#0,#0,#48,#8,#48,#144,#0,#192,#25,#224,#49,#240,#195
    ROOM_C18: .db #24,#0,#24,#0,#12,#48,#9,#60,#25,#188,#0,#48,#224,#15,#198,#63,#206,#63
    ROOM_C19: .db #0,#0,#28,#56,#34,#68,#147,#201,#186,#93,#73,#146,#34,#68,#28,#56,#0,#0
    ROOM_C20: .db #192,#32,#159,#73,#203,#146,#194,#82,#147,#212,#91,#168,#72,#43,#109,#160,#9,#191
    ROOM_C21: .db #224,#68,#200,#130,#148,#73,#84,#66,#40,#137,#137,#40,#194,#84,#228,#41,#240,#18
    ROOM_C22: .db #255,#64,#254,#64,#128,#64,#0,#32,#0,#32,#192,#1,#192,#7,#240,#63,#248,#127
    ROOM_C23: .db #8,#14,#14,#14,#2,#4,#0,#26,#0,#14,#30,#24,#2,#11,#246,#30,#24,#0
    ROOM_C24: .db #0,#0,#255,#255,#0,#0,#255,#255,#255,#255,#0,#0,#0,#0,#255,#255,#0,#0
    ROOM_C25: .db #48,#0,#50,#108,#48,#12,#96,#70,#100,#6,#48,#44,#52,#12,#48,#44,#2,#76
    ROOM_C26: .db #0,#0,#4,#254,#14,#124,#62,#28,#127,#72,#0,#192,#0,#224,#0,#240,#0,#248
    ROOM_C27: .db #16,#0,#56,#40,#124,#16,#0,#20,#0,#0,#24,#0,#36,#56,#36,#40,#24,#56
    ROOM_C28: .db #48,#0,#232,#24,#3,#16,#3,#16,#24,#48,#16,#96,#32,#3,#112,#3,#0,#6
    ROOM_C29: .db #30,#0,#30,#120,#6,#232,#4,#62,#0,#30,#60,#124,#126,#248,#126,#96,#0,#0
    ROOM_C30: .db #0,#0,#0,#0,#28,#16,#120,#24,#120,#24,#28,#48,#0,#0,#0,#0,#0,#0
    ROOM_C31: .db #0,#64,#62,#72,#34,#72,#56,#100,#0,#204,#28,#16,#4,#60,#4,#24,#4,#3


HIDDEN_ROOMS:
    ROOM_H1: .db #0,#0,#2,#4,#0,#0,#0,#0,#0,#0,#32,#0,#0,#0,#0,#8,#0,#0
    ROOM_H2: .db #224,#112,#192,#48,#160,#80,#32,#64,#18,#136,#2,#8,#20,#5,#24,#3,#28,#7
    ROOM_H3: .db #3,#192,#12,#48,#48,#12,#11,#208,#11,#208,#48,#12,#12,#48,#3,#192,#0,#0
    ROOM_H4: .db #35,#128,#21,#128,#8,#0,#40,#68,#228,#40,#72,#36,#80,#42,#9,#174,#97,#138
    ROOM_H5: .db #0,#0,#0,#0,#171,#157,#116,#74,#86,#78,#138,#209,#131,#17,#128,#1,#0,#0
    ROOM_H6: .db #4,#2,#128,#16,#0,#0,#16,#0,#0,#8,#0,#0,#32,#1,#0,#32,#128,#4
    ROOM_H7: .db #128,#1,#0,#0,#32,#4,#8,#16,#1,#128,#4,#32,#32,#4,#0,#0,#128,#1
    ROOM_H8: .db #255,#255,#136,#17,#136,#17,#0,#0,#0,#0,#136,#17,#136,#17,#136,#17,#255,#255


PUZZLE_ROOMS:
    ROOM_P1: .db #255,#255,#184,#1,#168,#1,#80,#0,#0,#0,#240,#21,#192,#21,#240,#29,#255,#255
    ROOM_P2: .db #255,#31,#191,#65,#163,#127,#2,#0,#0,#0,#0,#128,#254,#197,#130,#253,#248,#255
    ROOM_P3: .db #255,#255,#145,#129,#197,#191,#219,#88,#24,#3,#253,#177,#197,#173,#145,#161,#255,#255
    ROOM_P4: .db #227,#17,#129,#21,#189,#213,#34,#42,#47,#169,#212,#91,#85,#200,#85,#142,#17,#128
    ROOM_P5: .db #0,#255,#5,#129,#5,#191,#10,#80,#10,#80,#229,#160,#165,#160,#189,#160,#129,#0
    ROOM_P6: .db #0,#56,#0,#8,#20,#56,#40,#20,#56,#20,#16,#0,#28,#0,#0,#0,#0,#0
    ROOM_P7: .db #156,#1,#0,#40,#0,#40,#16,#20,#16,#0,#56,#0,#0,#0,#24,#48,#152,#49
    ROOM_P8: .db #65,#0,#65,#40,#65,#40,#130,#20,#238,#119,#20,#130,#20,#130,#20,#130,#0,#130



TEMPLE_ROOMS:
    ROOM_T1: .db #255,#255,#192,#3,#128,#1,#0,#0,#0,#0,#128,#1,#128,#1,#192,#3,#255,#255
    ROOM_T2: .db #238,#119,#170,#85,#238,#119,#0,#0,#0,#0,#0,#0,#231,#231,#165,#165,#231,#231
    ROOM_T3: .db #56,#224,#40,#128,#56,#224,#16,#80,#16,#119,#224,#10,#32,#14,#64,#10,#64,#14
    ROOM_T4: .db #162,#82,#69,#1,#160,#42,#20,#8,#8,#20,#10,#0,#80,#85,#37,#34,#82,#85
    ROOM_T5: .db #248,#16,#168,#23,#249,#152,#3,#192,#3,#192,#1,#128,#248,#39,#168,#37,#184,#25
    ROOM_T6: .db #1,#0,#1,#146,#1,#170,#124,#65,#124,#62,#65,#124,#85,#128,#73,#128,#0,#128
    ROOM_T7: .db #0,#4,#0,#4,#0,#7,#0,#0,#0,#0,#0,#0,#224,#0,#32,#0,#32,#0
    ROOM_T8: .db #40,#92,#40,#84,#40,#84,#80,#46,#0,#0,#44,#84,#34,#92,#36,#68,#46,#68


SURVIVAL_ROOMS:
    ROOM_S1: .db #132,#33,#33,#132,#0,#0,#40,#8,#16,#20,#0,#0,#34,#68,#0,#0,#137,#145
    ROOM_S2: .db #0,#0,#60,#208,#4,#80,#8,#8,#8,#14,#0,#0,#112,#156,#0,#132,#6,#132
    ROOM_S3: .db #0,#0,#12,#48,#24,#24,#34,#68,#2,#64,#16,#8,#24,#24,#12,#48,#0,#0
    ROOM_S4: .db #0,#0,#0,#0,#58,#84,#84,#42,#84,#42,#58,#84,#0,#0,#0,#0,#0,#0
    ROOM_S5: .db #0,#4,#28,#10,#34,#2,#71,#253,#71,#249,#34,#162,#28,#10,#0,#4,#0,#0
    ROOM_S6: .db #32,#0,#32,#12,#48,#8,#32,#12,#16,#8,#12,#48,#4,#32,#0,#32,#0,#0
    ROOM_S7: .db #0,#0,#0,#0,#28,#48,#40,#20,#56,#24,#20,#40,#20,#48,#0,#0,#0,#0

    VOID_ROOM: .db #0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0,#0

ARRAY_ROOM_C_ALL:   .dw ROOM_C1 , ROOM_C2 , ROOM_C3 , ROOM_C4 , ROOM_C5 , ROOM_C6
                    .dw ROOM_C7 , ROOM_C8 , ROOM_C9 , ROOM_C10, ROOM_C11, ROOM_C12
                    .dw ROOM_C13, ROOM_C13, ROOM_C14, ROOM_C15, ROOM_C16, ROOM_C17
                    .dw ROOM_C18, ROOM_C19, ROOM_C20, ROOM_C21, ROOM_C22, ROOM_C23
                    .dw ROOM_C24, ROOM_C25, ROOM_C26, ROOM_C27, ROOM_C28, ROOM_C29
                    .dw ROOM_C30, ROOM_C31, VOID_ROOM

ARRAY_ROOM_H_ALL:   .dw ROOM_H1 , ROOM_H2 , ROOM_H3 , ROOM_H4 , ROOM_H5 , ROOM_H6
                    .dw ROOM_H7 , ROOM_H8

ARRAY_ROOM_P_ALL:   .dw ROOM_P1 , ROOM_P2 , ROOM_P3 , ROOM_P4 , ROOM_P5 , ROOM_P6
                    .dw ROOM_P7 , ROOM_P8

ARRAY_ROOM_T_ALL:   .dw ROOM_T1 , ROOM_T2 , ROOM_T3 , ROOM_T4 , ROOM_T5 , ROOM_T6
                    .dw ROOM_T7 , ROOM_T8

ARRAY_ROOM_S_ALL:   .dw ROOM_S1 , ROOM_S2 , ROOM_S3 , ROOM_S4 , ROOM_S5 , ROOM_S6
                    .dw ROOM_S7 , VOID_ROOM

CONNECTOR_ROOM      = #1       ;; ID 1
PUZZLE_ROOM         = #2       ;; ID 2 
TEMPLE_ROOM         = #3       ;; ID 3 
SURVIVE_ROOM        = #4       ;; ID 4
HIDDEN_ROOM         = #5       ;; ID 5
STORE_ROOM          = #6       ;; ID 6
BET_ROOM            = #7       ;; ID 7
OBJECT_ROOM         = #8       ;; ID 8
BOSSES_ROOM         = #9       ;; ID 9 
INITIAL_ROOM        = #10      ;; ID 10

N_CONNECTOR_ROOMS   = #31      ;; 0b00011111
N_PUZZLE_ROOMS      = #7       ;; 0b00000111
N_TEMPLE_ROOMS      = #7       ;; 0b00000111
N_SURVIVE_ROOMS     = #7       ;; 0b00000111
N_HIDDEN_ROOMS      = #7       ;; 0b00000111
N_ROOMS_TO_VALUE    = #5       ;; --

ID_ROOMS:       .db CONNECTOR_ROOM , PUZZLE_ROOM , TEMPLE_ROOM , SURVIVE_ROOM , HIDDEN_ROOM
N_ARRAY_ROOMS:  .db N_CONNECTOR_ROOMS , N_PUZZLE_ROOMS , N_TEMPLE_ROOMS , N_SURVIVE_ROOMS , N_HIDDEN_ROOMS
ARRAY_ROOMS:    .dw ARRAY_ROOM_C_ALL , ARRAY_ROOM_P_ALL , ARRAY_ROOM_T_ALL , ARRAY_ROOM_S_ALL
                .dw ARRAY_ROOM_H_ALL

SELECTOR_R: .dw #0x0000
TILE_SIZE     = #0x1010

.globl cpct_getRandom_lcg_u8_asm

.area _CODE 

;;===============================================================================
;; DEFINED FUNCTIONS                                                            #
;;===============================================================================

;;===============================================================================
;; FUNCTION SELECT_ROOM_ASM                                                     #
;;                                                                              #
;;  Input Parameters : HL = Pointer to ID ROOM                                  #
;;===============================================================================
select_room_asm::
    ld de , #ID_ROOMS           ;; DE = ID ROOMS
    ld  b , #N_ROOMS_TO_VALUE   ;;  B = N ROOMS
    ex de , hl                  ;; EXCHANGE DE<->HL
_loop_select_room:
    ld  a , (de)                ;; A  = ID ROOM
    cp  (hl)                    ;; COMPARE (HL)
    jr  z , selected_room       ;; IF A == 0 THEN JUMP
    djnz _loop_select_room      ;; B--
ret

selected_room:
ret